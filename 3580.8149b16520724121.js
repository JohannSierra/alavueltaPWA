"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3580],{3580:(M,l,c)=>{c.r(l),c.d(l,{DatosPageModule:()=>E});var g=c(2881),u=c(4341),r=c(3092),m=c(5207),D=c(467),e=c(1360),p=c(7664),v=c(5032),f=c(8198);function h(o,s){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2,"Usar direcci\xf3n guardada:"),e.k0s(),e.nrm(3,"ion-radio",10),e.j41(4,"p",11),e.EFF(5),e.k0s()()),2&o){const i=e.XpG(2);e.R7$(3),e.Y8G("value",!0),e.R7$(2),e.JRh(i.direccionGuardada)}}function G(o,s){if(1&o){const i=e.RV6();e.j41(0,"ion-item")(1,"ion-label",12),e.EFF(2,"Direcci\xf3n de entrega"),e.k0s(),e.j41(3,"ion-textarea",3),e.mxI("ngModelChange",function(n){e.eBV(i);const t=e.XpG(2);return e.DH7(t.nuevaDireccion,n)||(t.nuevaDireccion=n),e.Njj(n)}),e.k0s()()}if(2&o){const i=e.XpG(2);e.R7$(3),e.R50("ngModel",i.nuevaDireccion)}}function P(o,s){if(1&o){const i=e.RV6();e.j41(0,"div",8)(1,"ion-radio-group",3),e.mxI("ngModelChange",function(n){e.eBV(i);const t=e.XpG();return e.DH7(t.usarDireccionGuardada,n)||(t.usarDireccionGuardada=n),e.Njj(n)}),e.DNE(2,h,6,2,"ion-item",9),e.j41(3,"ion-item")(4,"ion-label"),e.EFF(5,"Ingresar nueva direcci\xf3n:"),e.k0s(),e.nrm(6,"ion-radio",10),e.k0s()(),e.DNE(7,G,4,1,"ion-item",9),e.k0s()}if(2&o){const i=e.XpG();e.R7$(),e.R50("ngModel",i.usarDireccionGuardada),e.R7$(),e.Y8G("ngIf",i.direccionGuardada),e.R7$(4),e.Y8G("value",!1),e.R7$(),e.Y8G("ngIf",!i.usarDireccionGuardada)}}const _=[{path:"",component:(()=>{var o;class s{constructor(a,n,t,d){this.router=a,this.alertCtrl=n,this.pedirService=t,this.navCtrl=d,this.metodoEntrega="recoger",this.direccionGuardada="",this.usarDireccionGuardada=!0,this.nuevaDireccion=""}ngOnInit(){this.cargarDireccionUsuario(),console.log("\u{1f50d} PagoPage - Productos en PedirService:",this.pedirService.getProductos())}cargarDireccionUsuario(){var a=this;return(0,D.A)(function*(){const n=localStorage.getItem("token");if(n)try{const t=yield fetch("https://backendalv.onrender.com/api/usuarios/me",{headers:{Authorization:`Bearer ${n}`}});if(!t.ok)throw new Error("Error al obtener perfil");const d=yield t.json();a.direccionGuardada=d.direccion||"",a.usarDireccionGuardada=!!a.direccionGuardada,a.usarDireccionGuardada&&a.pedirService.setDireccion(a.direccionGuardada)}catch(t){console.error("Error cargando direcci\xf3n:",t)}})()}siguiente(){var a=this;return(0,D.A)(function*(){if("domicilio"===a.metodoEntrega){if(a.usarDireccionGuardada&&!a.direccionGuardada)return void(yield(yield a.alertCtrl.create({header:"No tienes direcci\xf3n guardada",message:"Por favor ingresa una nueva direcci\xf3n para entrega a domicilio.",buttons:["OK"]})).present());if(!a.usarDireccionGuardada&&!a.nuevaDireccion.trim())return void(yield(yield a.alertCtrl.create({header:"Falta direcci\xf3n",message:"Por favor ingresa la direcci\xf3n para entrega a domicilio.",buttons:["OK"]})).present());a.usarDireccionGuardada||a.pedirService.setDireccion(a.nuevaDireccion.trim())}else a.pedirService.setDireccion("recoger");a.navCtrl.navigateForward("pago/metodo")})()}volver(){this.navCtrl.navigateBack("pago/resumen")}}return(o=s).\u0275fac=function(a){return new(a||o)(e.rXU(p.Ix),e.rXU(r.hG),e.rXU(f.O),e.rXU(v.q9))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-datos"]],standalone:!1,decls:15,vars:3,consts:[[3,"translucent"],["expand","block","color","medium","slot","start",3,"click"],[1,"ion-padding"],[3,"ngModelChange","ngModel"],["value","recoger"],["value","domicilio"],["style","margin-top: 20px;",4,"ngIf"],["expand","block",2,"margin-top","40px",3,"click"],[2,"margin-top","20px"],[4,"ngIf"],["slot","start",3,"value"],[2,"margin-left","40px","font-style","italic"],["position","floating"]],template:function(a,n){1&a&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-button",1),e.bIt("click",function(){return n.volver()}),e.EFF(3," Atr\xe1s "),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Datos de entrega"),e.k0s()()(),e.j41(6,"ion-content",2)(7,"ion-segment",3),e.mxI("ngModelChange",function(d){return e.DH7(n.metodoEntrega,d)||(n.metodoEntrega=d),d}),e.j41(8,"ion-segment-button",4),e.EFF(9,"Recoger en tienda"),e.k0s(),e.j41(10,"ion-segment-button",5),e.EFF(11,"Entrega a domicilio"),e.k0s()(),e.DNE(12,P,8,4,"div",6),e.j41(13,"ion-button",7),e.bIt("click",function(){return n.siguiente()}),e.EFF(14," Siguiente "),e.k0s()()),2&a&&(e.Y8G("translucent",!0),e.R7$(7),e.R50("ngModel",n.metodoEntrega),e.R7$(5),e.Y8G("ngIf","domicilio"===n.metodoEntrega))},dependencies:[g.bT,u.BC,u.vS,r.Jm,r.W9,r.eU,r.uz,r.he,r.KO,r.f0,r.Gp,r.eP,r.nc,r.BC,r.ai,r.Je,r.Gw],encapsulation:2}),s})()}];let F=(()=>{var o;class s{}return(o=s).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.iI.forChild(_),m.iI]}),s})(),E=(()=>{var o;class s{}return(o=s).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,u.YN,r.bv,F]}),s})()}}]);