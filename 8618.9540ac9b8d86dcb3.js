"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8618],{8618:(j,m,s)=>{s.r(m),s.d(m,{RegisterPageModule:()=>b});var R=s(2881),g=s(4341),i=s(3092),c=s(5207),p=s(467),h=s(7643),M=s(4843),e=s(1360),C=s(5032);const v=[{path:"",component:(()=>{var t;class l{constructor(o,n,a){this.navCtrl=o,this.http=n,this.alertCtrl=a,this.nombre="",this.correo="",this.telefono="",this.direccion="",this.contrasena="",this.vendedor=!1,this.cargando=!1,this.aceptoTerminos=!1}ngOnInit(){}volver(){this.navCtrl.navigateForward("/login")}mostrarAlerta(o,n){var a=this;return(0,p.A)(function*(){yield(yield a.alertCtrl.create({header:o,message:n,buttons:["OK"]})).present()})()}register(){var o=this;return(0,p.A)(function*(){if(!o.aceptoTerminos)return o.mostrarAlerta("T\xe9rminos y condiciones","Debes aceptar los t\xe9rminos para continuar.");if(!o.nombre.trim()||!o.correo.trim()||!o.contrasena.trim())return o.mostrarAlerta("Campos incompletos","Completa nombre, correo y contrase\xf1a.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.correo))return o.mostrarAlerta("Correo inv\xe1lido","Ingresa un correo v\xe1lido.");o.cargando=!0;try{const{getAuth:a,createUserWithEmailAndPassword:r,setPersistence:F,browserLocalPersistence:y}=yield Promise.resolve().then(s.bind(s,2186)),f=a();yield F(f,y);const k=yield(yield r(f,o.correo,o.contrasena)).user.getIdToken(),u={nombre:o.nombre.trim(),vendedor:o.vendedor};o.telefono.trim()&&(u.telefono=o.telefono.trim()),o.direccion.trim()&&(u.direccion=o.direccion.trim());const T=new h.Lr({Authorization:`Bearer ${k}`});yield(0,M._)(o.http.post("https://backendalv.onrender.com/api/usuarios",u,{headers:T})),yield(yield o.alertCtrl.create({header:"Registro exitoso",message:"Usuario registrado correctamente.",buttons:[{text:"OK",handler:()=>o.volver()}]})).present()}catch(a){console.error("Error durante registro:",a),o.mostrarAlerta("Error",`No se pudo registrar: ${a.message||a}`)}finally{o.cargando=!1}})()}}return(t=l).\u0275fac=function(o){return new(o||t)(e.rXU(C.q9),e.rXU(h.Qq),e.rXU(i.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],standalone:!1,decls:34,vars:8,consts:[[3,"translucent"],["expand","block","color","medium","slot","start",3,"click"],[1,"ion-padding"],["lines","full"],["position","floating"],["name","nombre","required","",3,"ngModelChange","ngModel"],["name","correo","type","email","required","",3,"ngModelChange","ngModel"],["name","contrasena","type","password","required","",3,"ngModelChange","ngModel"],["lines","none"],["slot","start","name","vendedor",3,"ngModelChange","ngModel"],["slot","start","name","aceptoTerminos",3,"ngModelChange","ngModel"],[1,"ion-text-wrap"],["routerLink","/aviso-privacidad"],["expand","block",1,"btn",3,"click","disabled"],[1,"ion-padding","ion-text-center"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-button",1),e.bIt("click",function(){return n.volver()}),e.EFF(3," Atr\xe1s "),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Registro"),e.k0s()()(),e.j41(6,"ion-content",2)(7,"form")(8,"ion-list",3)(9,"ion-item")(10,"ion-label",4),e.EFF(11,"Nombre de usuario"),e.k0s(),e.j41(12,"ion-input",5),e.mxI("ngModelChange",function(r){return e.DH7(n.nombre,r)||(n.nombre=r),r}),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",4),e.EFF(15,"Correo electr\xf3nico"),e.k0s(),e.j41(16,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(n.correo,r)||(n.correo=r),r}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label",4),e.EFF(19,"Contrase\xf1a"),e.k0s(),e.j41(20,"ion-input",7),e.mxI("ngModelChange",function(r){return e.DH7(n.contrasena,r)||(n.contrasena=r),r}),e.k0s()(),e.j41(21,"ion-item",8)(22,"ion-toggle",9),e.mxI("ngModelChange",function(r){return e.DH7(n.vendedor,r)||(n.vendedor=r),r}),e.EFF(23," Soy vendedor "),e.k0s()()(),e.j41(24,"ion-item",8)(25,"ion-checkbox",10),e.mxI("ngModelChange",function(r){return e.DH7(n.aceptoTerminos,r)||(n.aceptoTerminos=r),r}),e.k0s(),e.j41(26,"ion-label",11),e.EFF(27," Al registrarte, aceptas "),e.j41(28,"a",12),e.EFF(29,"nuestros aviso de privacidad"),e.k0s(),e.EFF(30,". "),e.k0s()(),e.j41(31,"ion-button",13),e.bIt("click",function(){return n.register()}),e.EFF(32),e.k0s()(),e.nrm(33,"ion-footer",14),e.k0s()),2&o&&(e.Y8G("translucent",!0),e.R7$(12),e.R50("ngModel",n.nombre),e.R7$(4),e.R50("ngModel",n.correo),e.R7$(4),e.R50("ngModel",n.contrasena),e.R7$(2),e.R50("ngModel",n.vendedor),e.R7$(3),e.R50("ngModel",n.aceptoTerminos),e.R7$(6),e.Y8G("disabled",!n.aceptoTerminos||n.cargando),e.R7$(),e.SpI(" ",n.cargando?"Registrando...":"Registrarse","\n"))},dependencies:[g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,i.Jm,i.eY,i.W9,i.M0,i.eU,i.$w,i.uz,i.he,i.nf,i.BC,i.BY,i.ai,i.hB,i.Gw,i.oY,c.Wk],styles:[".ion-text-center[_ngcontent-%COMP%]{text-align:center}.btn[_ngcontent-%COMP%]{margin:20px;align-items:center}div[_ngcontent-%COMP%]{display:grid;place-items:center;text-align:center}"]}),l})()}];let P=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.iI.forChild(v),c.iI]}),l})(),b=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[R.MD,g.YN,i.bv,P]}),l})()}}]);